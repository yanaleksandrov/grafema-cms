document.addEventListener("alpine:init",(()=>{const e=new URL(window.location.href),o=new URLSearchParams(e.search);Alpine.magic("dialog",(t=>{const i=(t,i={},n="grafema-dialog",a)=>{setTimeout((()=>{let l=document.querySelector(`#${t}`),r=document.querySelector(`#${n}`);r&&l&&(i.content=l.innerHTML,Alpine.store("dialog",i),a?r.showModal():r.show(),document.body.style.overflow="hidden",o.set("dialog",t),e.search=o.toString(),window.history.pushState({},"",e.toString()),r.addEventListener("close",(()=>{o.delete("dialog"),e.search=o.toString(),window.history.replaceState({},"",e.toString())})))}),25)};return{init:async e=>{let n=o.get("dialog");if(t?.id===n&&n&&e){let o=await e();o&&i(n,o,"grafema-dialog",!0)}},open:(e,o={},t)=>i(e,o,t,!0),show:(e,o={},t)=>i(e,o,t,!1),close:(e="grafema-dialog")=>{let o=document.querySelector(`#${e}`)||t.closest("dialog");o&&(o.close(),document.body.style.overflow="")}}}))}));