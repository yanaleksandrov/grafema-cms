document.addEventListener("alpine:init",(()=>{const e=(e,o,t)=>{const n=new URL(window.location.href),a=new URLSearchParams(n.search);t?a.delete(e):a.set(e,o),n.search=a.toString(),window.history.replaceState({},"",n.toString())},o=(o,t={},n="grafema-dialog",a)=>{setTimeout((()=>{let i=document.querySelector(`#${o}`),l=document.querySelector(`#${n}`);if(l&&i){let n=l.querySelector("[data-content]");n&&(n.innerHTML=i.innerHTML),Alpine.store("dialog",t),a?l.showModal():l.show(),document.body.style.overflow="hidden",e("dialog",o,!1);const r=()=>{e("dialog",null,!0),l.removeEventListener("close",r)};l.addEventListener("close",r)}}),25)};Alpine.magic("dialog",(e=>({init:async t=>{const n=new URL(window.location.href),a=new URLSearchParams(n.search).get("dialog");if(e?.id===a&&a&&t){let e=await t();e&&o(a,e,"grafema-dialog",!0)}},open:(e,t={},n)=>{o(e,t,n,!0)},show:(e,t={},n)=>{o(e,t,n,!1)},close:(o="grafema-dialog")=>{let t=document.querySelector(`#${o}`)||e.closest("dialog");t&&(t.close(),document.body.style.overflow="")}})))}));